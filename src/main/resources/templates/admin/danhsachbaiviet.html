<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{admin/base}">

<head>
    <title layout:title th:text="'Danh sách bài viết'">Danh sách bài viết</title>
</head>
<body>

<main layout:fragment="content">
    <h2 class="text-2xl font-semibold mb-6 flex justify-between items-center">
        Danh sách bài viết
        <a href="/baiviet/add"
           class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 text-sm font-medium">
            + Thêm mới
        </a>
    </h2>
    <div class="overflow-x-auto bg-white shadow rounded-lg p-4">
        <p th:if="${message}" class="text-green-600 font-medium mb-3">
            <span th:text="${message}"></span>
        </p>

        <table class="min-w-full divide-y divide-gray-200 text-sm table-auto">
            <thead class="bg-gray-100 text-gray-700">
            <tr>
                <th class="px-4 py-2 text-left font-medium whitespace-nowrap">#</th>
                <th class="px-4 py-2 text-left font-medium whitespace-nowrap">Tiêu đề</th>
                <th class="px-4 py-2 text-left font-medium whitespace-nowrap">Danh mục</th>
                <th class="px-4 py-2 text-left font-medium whitespace-nowrap">Tác giả</th>
                <th class="px-4 py-2 text-left font-medium whitespace-nowrap">Ngày tạo</th>
                <th class="px-4 py-2 text-left font-medium whitespace-nowrap">Trạng thái</th>
                <th class="px-4 py-2 text-left font-medium whitespace-nowrap">Trạng thái bài viết</th>
                <th class="px-4 py-2 text-center font-medium whitespace-nowrap">Hành động</th>
            </tr>
            </thead>
            <tbody class="divide-y divide-gray-200" th:if="${articles}">
            <tr th:each="post, iterStat : ${articles}" class="hover:bg-gray-50 cursor-pointer">

                <!-- STT -->
                <td class="px-4 py-2 text-gray-800 whitespace-nowrap" th:text="${iterStat.index + 1}">1</td>

                <!-- Tiêu đề -->
                <td class="px-4 py-2 text-gray-800 max-w-[200px] truncate"
                    th:text="${post.title}" th:title="${post.title}">Tiêu đề bài viết</td>

                <!-- Danh mục -->
                <td class="px-4 py-2 text-gray-800 max-w-[200px] truncate"
                    th:text="${post.category.name}">Danh mục</td>

                <!-- Tác giả -->
                <td class="px-4 py-2 text-gray-800 whitespace-nowrap"
                    th:text="${post.author.username}">Tác giả</td>

                <!-- Ngày tạo -->
                <td class="px-4 py-2 text-gray-800 whitespace-nowrap"
                    th:text="${#temporals.format(post.createdAt, 'dd/MM/yyyy')}">Ngày tạo</td>

                <!-- Trạng thái -->
                <td class="px-4 py-2 whitespace-nowrap">
                    <span th:if="${post.featured}" class="inline-block bg-green-100 text-green-700 text-sm font-medium px-2 py-1 rounded-full">
                        Nổi bật
                    </span>
                                    <span th:unless="${post.featured}" class="inline-block bg-gray-100 text-gray-700 text-sm font-medium px-2 py-1 rounded-full">
                        Thường
                    </span>
                                </td>

                                <td class="px-4 py-2 whitespace-nowrap">
                    <span th:if="${post.status}" class="inline-block bg-blue-100 text-blue-700 text-sm font-medium px-2 py-1 rounded-full">
                        Hiển thị
                    </span>
                                    <span th:unless="${post.status}" class="inline-block bg-red-100 text-red-700 text-sm font-medium px-2 py-1 rounded-full">
                        Ẩn
                    </span>
                </td>


                <!-- Hành động -->
                <td class="px-4 py-2 text-center whitespace-nowrap">
                    <a th:href="@{/baiviet/edit/{id}(id=${post.id})}"
                       class="text-yellow-400 hover:underline"
                      >Sửa</a> |
                    <a th:href="@{/baiviet/delete/{id}(id=${post.id})}"
                       class="text-red-600 hover:underline"
                    >Xóa</a>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</main>

</body>
</html>
