<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{base}">

<head>
    <title layout:title="Trang chủ" th:text="${article.title}">Chi tiết bài viết</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .prose img {
            max-width: 100%;
            height: auto;
            border-radius: 0.75rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }
        .prose img:hover {
            transform: scale(1.02);
        }
        .prose p {
            text-align: justify;
            line-height: 1.8;
            color: #374151;
        }
        .prose h2 {
            font-size: 1.75rem;
            font-weight: 700;
            margin-top: 2.5rem;
            margin-bottom: 1.25rem;
            color: #1f2937;
        }
        .sticky {
            position: -webkit-sticky;
            position: sticky;
            top: 1rem;
        }
        .hover-scale {
            transition: transform 0.3s ease;
        }
        .hover-scale:hover {
            transform: scale(1.03);
        }
        .social-icon:hover {
            transform: translateY(-2px);
        }
    </style>
</head>

<body>
<main layout:fragment="content" class="bg-gray-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <div class="flex flex-col lg:flex-row gap-6">
            <!-- Main Content -->
            <div class="w-full lg:w-3/4">
                <div class="bg-white rounded-xl shadow-lg p-6 md:p-10 transition-all duration-300 hover:shadow-xl">
                    <!-- Category & Date -->
                    <div class="flex flex-wrap justify-between items-center mb-6 text-sm text-gray-500">
                        <span class="inline-block bg-blue-700 text-white px-4 py-1.5 rounded-full text-xs uppercase font-semibold tracking-wider">
                            <span th:text="${article.category.name}">Pháp luật</span>
                        </span>
                        <span class="font-medium" th:text="${#temporals.format(article.createdAt, 'dd/MM/yyyy HH:mm')}">01/01/2025 12:00</span>
                    </div>

                    <!-- Title -->
                    <h1 class="text-3xl font-bold leading-tight text-gray-900 mb-6" th:text="${article.title}">
                        Tiêu đề bài viết dài và nổi bật
                    </h1>

                    <!-- Author -->
                    <div class="flex items-center text-sm text-gray-600 mb-8">
                        <span class="font-semibold text-gray-800" th:text="${article.author.username}">TinTucPro</span>
                        <span class="mx-2">•</span>
                    </div>
                    <input type="hidden" id="articleId" th:value="${article.id}" />
                    <input type="hidden" id="authorId" th:value="${article.getAuthor().getId()}" />

                    <!-- Main Image -->
                    <div class="mb-10">
                        <img th:src="${article.image}" th:alt="${article.title}" class="w-full h-64 md:h-96 object-cover rounded-xl shadow-lg hover-scale" />
                    </div>

                    <!-- Content -->
                    <div class="prose lg:prose-lg max-w-none" th:utext="${article.content}">
                        <p>Đây là nội dung mô phỏng của bài viết. Nội dung sẽ được hiển thị tại đây với các định dạng như đoạn văn, tiêu đề, danh sách, và hình ảnh được chèn từ trình soạn thảo.</p>
                    </div>

                    <!-- Social Sharing -->
                    <div class="mt-8 flex justify-start space-x-6">
                        <a href="#" class="text-blue-600 hover:text-blue-800 social-icon transition-all duration-200">
                            <svg class="w-7 h-7" fill="currentColor" viewBox="0 0 24 24"><path d="M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"></path></svg>
                        </a>
                        <a href="#" class="text-blue-400 hover:text-blue-600 social-icon transition-all duration-200">
                            <svg class="w-7 h-7" fill="currentColor" viewBox="0 0 24 24"><path d="M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z"></path></svg>
                        </a>
                        <a href="#" class="text-red-600 hover:text-red-800 social-icon transition-all duration-200">
                            <svg class="w-7 h-7" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.04c-5.5 0-10 4.49-10 10.02 0 5 3.66 9.15 8.44 9.9v-7H7.9v-2.9h2.54V9.85c0-2.51 1.49-3.89 3.78-3.89 1.09 0 2.23.19 2.23.19v2.47h-1.26c-1.24 0-1.63.77-1.63 1.56v1.88h2.78l-.45 2.9h-2.33v7A10.04 10.04 0 0022 12.06c0-5.53-4.5-10.02-10-10.02z"></path></svg>
                        </a>
                    </div>
                </div>

                <!-- Comments Section -->
                <div class="bg-white rounded-xl shadow-lg p-6 md:p-10 mt-8 transition-all duration-300 hover:shadow-xl">
                    <h2 class="text-2xl font-bold mb-6 text-gray-900">Bình luận</h2>
                    <div class="mb-6">
                        <textarea id="commentContent" class="w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-700 transition-all duration-200" rows="4" placeholder="Viết bình luận của bạn..."></textarea>
                        <button id="submitCommentBtn" class="mt-4 bg-blue-700 text-white px-6 py-2 rounded-lg hover:bg-blue-800 transition-all duration-200">Gửi bình luận</button>
                    </div>
                    <div id="commentList" class="space-y-6">
                        <div class="space-y-6">
                            <div th:each="comment : ${article.comments}" class="flex items-start space-x-4">
                                <div class="w-12 h-12 bg-gray-200 rounded-full">
                                    <div class="w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center text-gray-500">
                                        <i class="fa-solid fa-user"></i>
                                    </div>

                                </div>
                                <div>
                                    <p class="font-semibold text-gray-800" th:text="${comment.user.username}">Tên người dùng</p>
                                    <p class="text-gray-600" th:text="${comment.content}">Nội dung bình luận</p>
                                    <p class="text-xs text-gray-400" th:text="${#temporals.format(comment.createdAt, 'dd/MM/yyyy')}">Ngày giờ</p>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

            </div>

            <!-- Sidebar -->
            <div class="w-full lg:w-1/4">
                <div class="sticky top-4">
                    <!-- Related Articles -->
                    <div class="bg-white rounded-xl shadow-lg p-6 mb-6 transition-all duration-300 hover:shadow-xl">
                        <h2 class="text-xl font-bold mb-4 text-gray-900">Bài viết liên quan</h2>
                        <ul class="space-y-4">
                            <li th:each="related : ${articleRelation}">
                                <a th:href="@{/articles/{id}(id=${related.id})}" class="flex items-center space-x-4 hover:text-blue-700 transition-all duration-200 hover-scale">
                                    <img th:src="${related.image}" class="w-16 h-16 object-cover rounded-md" />
                                    <div>
                                        <p class="font-semibold text-gray-800 text-sm line-clamp-2" th:text="${related.title}">Tiêu đề bài viết liên quan</p>
                                        <p class="text-xs text-gray-500" th:text="${#temporals.format(related.createdAt, 'dd/MM/yyyy')}">01/01/2025</p>
                                    </div>
                                </a>
                            </li>
                        </ul>
                    </div>

                    <!-- Advertisement -->
                    <div class="bg-white rounded-xl shadow-lg p-6 transition-all duration-300 hover:shadow-xl">
                        <div class="w-full h-48 bg-gray-200 rounded-lg flex items-center justify-center">
                            <img src="https://baomoi-static.bmcdn.me/events/banner_hcm_02-min.png">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>
</body>
</html>